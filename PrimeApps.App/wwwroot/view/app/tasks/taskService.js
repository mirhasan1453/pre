"use strict";angular.module("primeapps").factory("TaskService",["$rootScope","$filter","taskDate",function(e,t,a){return{getViews:function(){var t={};t.id=1,t.label="tr"===e.language?"Açık Görevler":"Open Tasks",t.type="open";var a={};a.id=1,a.label="tr"===e.language?"Tamamlanan Görevler":"Completed Tasks",a.type="completed";var s=[];return s.push(t),s.push(a),s},processTask:function(s,r){var u=t("filter")(e.users,{id:s["owner.users.id"]},!0)[0];u&&(s.assignedTo=u,s.isCompleted=s.task_status===r.label[e.user.tenant_language],s.dueDate=s.task_due_date?moment.utc(s.task_due_date).toDate():a.future,s.isCompleted&&(s.completeDate=moment.utc(s.updated_at).toDate()))},processTasks:function(e,t){var a=this;return angular.forEach(e,function(e){a.processTask(e,t)}),e},prepareTask:function(e,t){var a={};a.subject=e.subject,a.owner=e.assignedTo.id;var s=moment(e.task_due_date).format().split("+");return a.task_due_date=s[0],e.id?a.id=e.id:(a.activity_type=1,a.task_status=t.id),a}}}]);