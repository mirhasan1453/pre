"use strict";var app=angular.module("primeapps",[]);app.controller("TimesheetListController",["$rootScope","$scope","$filter","ngToast","$popover","helper","ModuleService",function(e,r,o,a,t,s,l){r.loading=!0,r.user=e.user.id,r.filterList=[{name:"Waiting Approval From Me",status:"draft",id:1},{name:"Approved by Me",status:"approved",id:2},{name:"Rejected by Me",status:"rejected",id:3}],r.getTimesheets=function(e){e=e?e:"draft";var o={};o.fields=["related_timesheet.timesheet.term","related_timesheet","selected_project","status","owner","approval_type"],"draft"===e?(o.filters=[{field:"1_approver",operator:"equals",value:r.user,no:1},{field:"status",operator:"is",value:"Waiting for Approval (First Level)",no:2},{field:"2_approver",operator:"equals",value:r.user,no:3},{field:"status",operator:"is",value:"Waiting for Approval (Second Level)",no:4}],o.filter_logic="(1 and 2) or (3 and 4)"):"approved"===e?(o.filters=[{field:"1_approver",operator:"equals",value:r.user,no:1},{field:"status",operator:"is",value:"Approved",no:2},{field:"1_approver",operator:"equals",value:r.user,no:3},{field:"status",operator:"is",value:"Waiting for Approval (Second Level)",no:4},{field:"2_approver",operator:"equals",value:r.user,no:5},{field:"status",operator:"is",value:"Approved",no:6},{field:"1_approver",operator:"equals",value:r.user,no:7},{field:"status",operator:"is",value:"Rejected",no:8}],o.filter_logic="(1 and 2) or (3 and 4) or (5 and 6) or (7 and 8)"):"rejected"===e&&(o.filters=[{field:"1_approver",operator:"equals",value:r.user,no:1},{field:"status",operator:"is",value:"Rejected (First Level)",no:2},{field:"2_approver",operator:"equals",value:r.user,no:3},{field:"status",operator:"is",value:"Rejected",no:4}],o.filter_logic="(1 and 2) or (3 and 4)"),o.limit=9999,l.findRecords("timesheet_item",o).then(function(e){r.loading=!1,r.timesheetList=e.data})},r.getTimesheets()}]);