"use strict";angular.module("primeapps").controller("quoteConvertMapController",["$rootScope","$scope","$filter","$cache","helper","ConvertMapService","ngToast",function(e,o,t,i,d,n,a){o.$parent.collapsed=!0,o.language=e.language,o.quoteModule=t("filter")(e.modules,{name:"quotes"},!0)[0],o.salesOrderModule=t("filter")(e.modules,{name:"sales_orders"},!0)[0];var l=function(){var e=o.quoteModule.id;n.getMappings(e).then(function(e){o.salesOrderModule.selectedFields={},angular.forEach(e.data,function(e){o.salesOrderModule.selectedFields[e.field_id]=t("filter")(o.salesOrderModule.fields,{id:e.mapping_field_id},o.salesOrderModule,{id:e.mapping_module_id},!0)[0]})})["catch"](function(){a.create({content:t("translate")("Common.Error"),className:"danger"})})};l(),o.customFilter=function(e){return function(o){return"lookup"===o.data_type&&"lookup"===e.data_type?o.lookup_type===e.lookup_type?!0:!1:"picklist"===o.data_type&&"picklist"===e.data_type?o.picklist_id===e.picklist_id?!0:!1:!0}},o.mappingModuleFieldChanged=function(e,i,d){var l={};if(l.module_id=o.quoteModule.id,l.mapping_module_id=e.id,l.field_id=i.id,l.mapping_field_id=null,e.selectedFields[i.id]){var s=e.selectedFields[i.id];l.mapping_field_id=s.id,n.createMapping(l).then(function(){o.showSuccessIcon={},o.showSuccessIcon[i.id]={},o.showSuccessIcon[i.id][e.id]=!0})["catch"](function(){a.create({content:t("translate")("Common.Error"),className:"danger"})})}else l.mapping_field_id=d.id,n.deleteMapping(l).then(function(){o.showSuccessIcon={},o.showSuccessIcon[i.id]=!0})["catch"](function(){a.create({content:t("translate")("Common.Error"),className:"danger"})})}}]);