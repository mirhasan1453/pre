"use strict";angular.module("primeapps").controller("ProfileController",["$rootScope","$scope","$filter","ngToast","$popover","helper","ProfileService",function(e,t,o,l,r,n,i){function c(){i.getAll().then(function(o){t.profiles=i.getProfiles(o.data,e.workgroup.tenant_id,!0),t.loading=!1})["catch"](function(){t.loading=!1})}t.loading=!0,c(),t.showDeleteForm=function(e){t.selectedProfile=e;var o=angular.copy(t.profiles),l=angular.copy(e),i=n.arrayObjectIndexOf(o,l);o.splice(i,1),t.transferProfiles=o,t["deletePopover"+e.id]=t["deletePopover"+e.id]||r(angular.element(document.getElementById("deleteButton"+e.id)),{templateUrl:"view/setup/profiles/profileDelete.html",placement:"left",scope:t,autoClose:!0,show:!0})},t["delete"]=function(r){r||(r=t.transferProfiles[0].id),t.profileDeleting=!0,i.remove(t.selectedProfile.id,r,e.workgroup.tenant_id).then(function(){t.profileDeleting=!1,l.create({content:o("translate")("Setup.Profiles.DeleteSuccess"),className:"success"}),t["deletePopover"+t.selectedProfile.id].hide(),c()})["catch"](function(){t.profileDeleting=!1})}}]);